var windowFocus,windowDuration=2e4,windowSliding=!0,windowStart=0,windowEnd=1e4,metricsDisplayed=!1,timeRangeMouseDown=!1;function showMetrics(){metricsDisplayed=!0;var n=window.innerWidth-30;$("#bufferWindow_c")[0].width=$("#bitrateTimerange_c")[0].width=$("#bufferTimerange_c")[0].width=$("#videoEvent_c")[0].width=$("#metricsButton")[0].width=$("#loadEvent_c")[0].width=n,$("#bufferWindow_c").show(),$("#bitrateTimerange_c").show(),$("#bufferTimerange_c").show(),$("#videoEvent_c").show(),$("#metricsButton").show(),$("#loadEvent_c").show()}function hideMetrics(){metricsDisplayed=!1,$("#bufferWindow_c").hide(),$("#bitrateTimerange_c").hide(),$("#bufferTimerange_c").hide(),$("#videoEvent_c").hide(),$("#metricsButton").hide(),$("#loadEvent_c").hide()}function timeRangeSetSliding(n){windowDuration=n,windowSliding=!0,refreshCanvas()}function timeRangeCanvasonMouseDown(n){var e=n.currentTarget,i=e.getBoundingClientRect(),t=Math.round((n.clientX-i.left)*(e.width/i.width));windowStart=Math.max(0,Math.round((t-eventLeftMargin)*getWindowTimeRange().now/(e.width-eventLeftMargin))),windowEnd=windowStart+500,timeRangeMouseDown=!0,windowSliding=!1,$("#windowStart").val(windowStart),$("#windowEnd").val(windowEnd),refreshCanvas()}function timeRangeCanvasonMouseMove(n){if(timeRangeMouseDown){var e=n.currentTarget,i=e.getBoundingClientRect(),t=Math.round((n.clientX-i.left)*(e.width/i.width)),w=Math.max(0,Math.round((t-eventLeftMargin)*getWindowTimeRange().now/(e.width-eventLeftMargin)));w<windowStart?windowStart=w:windowEnd=w,windowStart===windowEnd&&(windowEnd+=50),$("#windowStart").val(windowStart),$("#windowEnd").val(windowEnd),refreshCanvas()}}function timeRangeCanvasonMouseUp(n){timeRangeMouseDown=!1}function timeRangeCanvasonMouseOut(n){timeRangeMouseDown=!1}function windowCanvasonMouseMove(n){var e=n.currentTarget,i=e.getBoundingClientRect(),t=Math.round((n.clientX-i.left)*(e.width/i.width)),w=getWindowTimeRange();windowFocus=w.min+Math.max(0,Math.round((t-eventLeftMargin)*(w.max-w.min)/(e.width-eventLeftMargin))),refreshCanvas()}function refreshCanvas(){if(metricsDisplayed)try{var n=getWindowTimeRange();canvasBufferTimeRangeUpdate($("#bufferTimerange_c")[0],0,n.now,n.min,n.max,events.buffer),0!==n.min||n.max!==n.now?($("#bufferWindow_c").show(),canvasBufferWindowUpdate($("#bufferWindow_c")[0],n.min,n.max,n.focus,events.buffer)):$("#bufferWindow_c").hide(),canvasBitrateEventUpdate($("#bitrateTimerange_c")[0],0,n.now,n.min,n.max,events.level,events.bitrate),canvasVideoEventUpdate($("#videoEvent_c")[0],n.min,n.max,events.video),canvasLoadEventUpdate($("#loadEvent_c")[0],n.min,n.max,events.load)}catch(n){console.log("refreshCanvas error:"+n.message)}}function getWindowTimeRange(){var n,e,i;return n=events.buffer.length?events.buffer[events.buffer.length-1].time:0,windowSliding?windowDuration?(e=Math.max(0,n-windowDuration),i=Math.min(e+windowDuration,n)):(e=0,i=n):(e=windowStart,i=windowEnd),(void 0===windowFocus||windowFocus<e||windowFocus>i)&&(windowFocus=e),{min:e,max:i,now:n,focus:windowFocus}}function timeRangeZoomIn(){if(windowSliding)windowDuration/=2;else{var n=windowEnd-windowStart;(windowStart+=n/4)===(windowEnd-=n/4)&&(windowEnd+=50)}$("#windowStart").val(windowStart),$("#windowEnd").val(windowEnd),refreshCanvas()}function timeRangeZoomOut(){if(windowSliding)windowDuration*=2;else{var n=windowEnd-windowStart;windowStart-=n/2,windowEnd+=n/2,windowStart=Math.max(0,windowStart),windowEnd=Math.min(events.buffer[events.buffer.length-1].time,windowEnd)}$("#windowStart").val(windowStart),$("#windowEnd").val(windowEnd),refreshCanvas()}function timeRangeSlideLeft(){var n=windowEnd-windowStart;windowStart-=n/4,windowEnd-=n/4,windowStart=Math.max(0,windowStart),windowEnd=Math.min(events.buffer[events.buffer.length-1].time,windowEnd),$("#windowStart").val(windowStart),$("#windowEnd").val(windowEnd),refreshCanvas()}function timeRangeSlideRight(){var n=windowEnd-windowStart;windowStart+=n/4,windowEnd+=n/4,windowStart=Math.max(0,windowStart),windowEnd=Math.min(events.buffer[events.buffer.length-1].time,windowEnd),$("#windowStart").val(windowStart),$("#windowEnd").val(windowEnd),refreshCanvas()}$("#windowStart").val(windowStart),$("#windowEnd").val(windowEnd);
//# sourceMappingURL=index.4cc6c1cb.js.map
