var eventLeftMargin=180,eventRightMargin=0;function canvasLoadEventUpdate(e,t,l,i){for(var a,n,f=e.getContext("2d"),r=0,h=20;r<i.length;r++)(n=(a=i[r]).time)>=t&&n<=l&&(h+=20);e.height=h,f.fillStyle="green",f.globalAlpha=.5,f.fillRect(0,0,eventLeftMargin,e.height),f.fillRect(e.width-eventRightMargin,0,eventRightMargin,e.height),f.globalAlpha=1;var g=5;f.font="12px Arial";var o="load event";for(f.fillStyle="black",f.fillText(o,g,15),g=eventLeftMargin+5,o="start - end",f.fillStyle="black",f.fillText(o,g,15),g+=f.measureText(o).width+5,o="[latency",f.fillStyle="orange",f.fillText(o,g,15),g+=f.measureText(o).width+5,o="loading",f.fillStyle="green",f.fillText(o,g,15),g+=f.measureText(o).width+5,o="parsing",f.fillStyle="blue",f.fillText(o,g,15),g+=f.measureText(o).width+5,o="appending]",f.fillStyle="red",f.fillText(o,g,15),g+=f.measureText(o).width+5,o="size bitrate",f.fillStyle="black",f.fillText(o,g,15),g+=f.measureText(o).width+5,r=0,h=20;r<i.length;r++)a=i[r],(n=Math.round(a.time))>=t&&n<=l&&(canvasDrawLoadEvent(f,h,a,t,l),h+=20)}function canvasVideoEventUpdate(e,t,l,i){for(var a,n,f=e.getContext("2d"),r=0,h=20;r<i.length;r++)(n=(a=i[r]).time)>=t&&n<=l&&(h+=20);e.height=h,f.fillStyle="green",f.globalAlpha=.5,f.fillRect(0,0,eventLeftMargin,e.height),f.fillRect(e.width-eventRightMargin,0,eventRightMargin,e.height),f.globalAlpha=1;var g=5;f.font="12px Arial";var o="video event";for(f.fillStyle="black",f.fillText(o,g,15),g=eventLeftMargin+5,o="time",f.fillStyle="black",f.fillText(o,g,15),g+=f.measureText(o).width+5,o="[duration]",f.fillStyle="blue",f.fillText(o,g,15),r=0,h=20;r<i.length;r++)a=i[r],(n=Math.round(a.time))>=t&&n<=l&&(canvasDrawVideoEvent(f,h,a,t,l),h+=20)}function canvasBufferWindowUpdate(e,t,l,i,a){var n,f,r,h,g=e.getContext("2d"),o=eventLeftMargin,v=g.canvas.width-eventLeftMargin-eventRightMargin;if(g.clearRect(0,0,e.width,e.height),0!==a.length){g.fillStyle="green",g.globalAlpha=.5,g.fillRect(0,0,eventLeftMargin,e.height),g.globalAlpha=1;var d=5,s=0;g.font="15px Arial";for(var b,c=0,x=-1,m=-1,u=0;u<a.length;u++)b=a[u],c=Math.max(c,b.buffer+b.pos),-1===x&&b.time>=t&&(x=Math.max(0,u-1)),-1===m&&b.time>=i&&(m=Math.max(0,u-1));x+1<a.length?n=(f=a[x].pos+(t-a[x].time)*(a[x+1].pos-a[x].pos)/(a[x+1].time-a[x].time))+a[x].buffer+(t-a[x].time)*(a[x+1].buffer-a[x].buffer)/(a[x+1].time-a[x].time):(n=0,f=0),m+1<a.length?(h=a[m].pos+(i-a[m].time)*(a[m+1].pos-a[m].pos)/(a[m+1].time-a[m].time),r=a[m].buffer+(i-a[m].time)*(a[m+1].buffer-a[m].buffer)/(a[m+1].time-a[m].time)):(h=0,r=0),c*=1.1,s+=15;var T="play pos/buffer zoomed";g.fillStyle="black",g.fillText(T,d,s),s+=15,T="["+t+","+l+"]",g.fillText(T,d,s),s+=15,T="focus time:"+i+" ms",g.fillText(T,d,s),s+=15,T="focus position:"+Math.round(h)+" ms",g.fillText(T,d,s),s+=15,T="focus buffer:"+Math.round(r)+" ms",g.fillText(T,d,s),g.fillStyle="blue",g.beginPath(),g.moveTo(o,g.canvas.height),g.lineTo(o,g.canvas.height*(1-n/c));for(var p=x+1;p<a.length;p++)d=o+v*((b=a[p]).time-t)/(l-t),s=g.canvas.height*(1-(b.buffer+b.pos)/c),g.lineTo(d,s);g.lineTo(d,e.height),g.fill(),g.fillStyle="brown",g.beginPath(),g.moveTo(o,g.canvas.height),g.lineTo(o,g.canvas.height*(1-f/c));for(var M=x+1;M<a.length;M++)d=o+v*((b=a[M]).time-t)/(l-t),s=g.canvas.height*(1-b.pos/c),g.lineTo(d,s);g.lineTo(d,e.height),g.fill(),g.fillStyle="white",g.fillRect(e.width-eventRightMargin,0,eventRightMargin,e.height),g.fillStyle="green",g.globalAlpha=.5,g.fillRect(e.width-eventRightMargin,0,eventRightMargin,e.height),g.globalAlpha=1,g.fillStyle="black",d=o+v*(i-t)/(l-t),g.moveTo(d,g.canvas.height),s=g.canvas.height*(1-(h+r)/c),g.lineTo(d,s),g.stroke()}}function canvasBufferTimeRangeUpdate(e,t,l,i,a,n){var f,r=e.getContext("2d"),h=eventLeftMargin,g=r.canvas.width-eventLeftMargin-eventRightMargin,o=0,v=0;r.clearRect(0,0,e.width,e.height),r.fillStyle="green",r.globalAlpha=.5,r.fillRect(0,0,eventLeftMargin,e.height),r.fillRect(e.width-eventRightMargin,0,eventRightMargin,e.height),r.globalAlpha=1,o=5,v=15;var d="play pos/buffer";if(r.fillStyle="black",r.font="15px Arial",r.fillText(d,o,v),0!==n.length){for(var s=0,b=0;b<n.length;b++)s=Math.max(s,n[b].buffer+n[b].pos);v+=15,d="last pos:"+n[n.length-1].pos+" ms",r.fillText(d,o,v),v+=15,d="last buffer:"+n[n.length-1].buffer+" ms",r.fillText(d,o,v),v+=15,d="max buffer:"+s+" ms",r.fillText(d,o,v),v+=15,d="nb samples:"+n.length,r.fillText(d,o,v),s*=1.1,r.fillStyle="blue",r.beginPath(),r.moveTo(h,r.canvas.height);for(var c=0;c<n.length;c++)o=h+g*((f=n[c]).time-t)/(l-t),v=r.canvas.height*(1-(f.buffer+f.pos)/s),r.lineTo(o,v);r.lineTo(o,e.height),r.fill(),r.fillStyle="brown",r.beginPath(),r.moveTo(h,r.canvas.height);for(var x=0;x<n.length;x++)o=h+g*((f=n[x]).time-t)/(l-t),v=r.canvas.height*(1-f.pos/s),r.lineTo(o,v);r.lineTo(o,e.height),r.fill(),r.globalAlpha=.7,r.fillStyle="grey";var m=h,u=g*(i-t)/(l-t);r.fillRect(m,0,u,e.height),m=h+g*(a-t)/(l-t),u=e.width-m-eventRightMargin,r.fillRect(m,0,u,e.height),r.globalAlpha=1}}function canvasBitrateEventUpdate(e,t,l,i,a,n,f){var r,h,g,o,v,d,s,b=e.getContext("2d"),c=eventLeftMargin,x=b.canvas.width-eventLeftMargin-eventRightMargin,m=0,u=0;if(b.clearRect(0,0,e.width,e.height),0!==n.length&&0!==f.length){v=d=f[0].bitrate,o=s=0;for(var T=0;T<f.length;T++)o+=f[T].duration*f[T].level,s+=f[T].duration,v=Math.max(v,f[T].bitrate),d=Math.min(d,f[T].bitrate);h=g=n[0].id;for(var p=0;p<n.length;p++)h=Math.max(h,n[p].id),g=Math.min(g,n[p].id);b.fillStyle="green",b.globalAlpha=.5,b.fillRect(0,0,eventLeftMargin,e.height),b.fillRect(e.width-eventRightMargin,0,eventRightMargin,e.height),b.globalAlpha=1,m=5,u=0,b.fillStyle="black",b.font="15px Arial",u+=15;var M="last bitrate:"+(f[f.length-1].bitrate/1e3).toFixed(2)+"Mb/s";b.fillText(M,m,u),u+=15,M="min bitrate:"+(d/1e3).toFixed(2)+"Mb/s",b.fillText(M,m,u),u+=15,M="max bitrate:"+(v/1e3).toFixed(2)+"Mb/s",b.fillText(M,m,u),u+=15,M="min/last/max level:"+g+"/"+n[n.length-1].id+"/"+h,b.fillText(M,m,u),u+=15,M="nb level switch:"+(n.length-1),b.fillText(M,m,u),u+=15,M="average level:"+(o/s).toFixed(2),b.fillText(M,m,u),v*=1.1,b.strokeStyle="blue",b.beginPath(),b.moveTo(c,b.canvas.height);for(var y=0;y<f.length;y++)m=c+x*((r=f[y]).time-t)/(l-t),u=b.canvas.height*(1-r.bitrate/v),b.lineTo(m,u);b.lineTo(c+x,u),b.stroke(),b.strokeStyle="black",b.beginPath(),m=c,u=b.canvas.height,b.moveTo(m,u);for(var w=0;w<n.length;w++)m=c+x*((r=n[w]).time-t)/(l-t),b.lineTo(m,u),u=b.canvas.height*(1-r.bitrate/v),b.lineTo(m,u);b.lineTo(c+x,u),b.stroke(),b.globalAlpha=.7,b.fillStyle="grey";var S=c,R=x*(i-t)/(l-t);b.fillRect(S,0,R,e.height),S=c+x*(a-t)/(l-t),R=e.width-S-eventRightMargin,b.fillRect(S,0,R,e.height),b.globalAlpha=1}}function canvasDrawLoadEvent(e,t,l,i,a){var n,f,r,h=eventLeftMargin,g=e.canvas.width-eventLeftMargin-eventRightMargin,o=Math.round(l.time+l.duration+l.latency);e.fillStyle="black",e.font="12px Arial",n=Math.round(l.time),f=h-(e.measureText(n).width+5)+g*(l.time-i)/(a-i),e.fillText(n,f,t+12),e.fillStyle="orange",f=h+g*(l.time-i)/(a-i),r=g*l.latency/(a-i),e.fillRect(f,t,r,15),e.fillStyle="green",f=h+g*(l.time+l.latency-i)/(a-i),r=g*l.load/(a-i),e.fillRect(f,t,r,15),l.parsing&&(e.fillStyle="blue",f=h+g*(l.time+l.latency+l.load-i)/(a-i),r=g*l.parsing/(a-i),e.fillRect(f,t,r,15),l.buffer&&(e.fillStyle="red",f=h+g*(l.time+l.latency+l.load+l.parsing-i)/(a-i),r=g*l.buffer/(a-i),e.fillRect(f,t,r,15))),e.fillStyle="black",e.font="12px Arial",n=o,f+=r+5,e.fillText(n,f,t+12),f+=e.measureText(n).width+5,n="["+Math.round(l.latency),e.fillStyle="orange",e.fillText(n,f,t+12),f+=e.measureText(n).width+5,n=Math.round(l.load),l.parsing||(n+="]"),e.fillStyle="green",e.fillText(n,f,t+12),f+=e.measureText(n).width+5,l.parsing&&(n=Math.round(l.parsing),l.buffer||(n+="]"),e.fillStyle="blue",e.fillText(n,f,t+12),f+=e.measureText(n).width+5,l.buffer&&(n=Math.round(l.buffer)+"]",e.fillStyle="red",e.fillText(n,f,t+12),f+=e.measureText(n).width+5)),l.size&&(n=l.size>1e6?(l.size/1e6).toFixed(1)+"MB":Math.round(l.size/1e3)+"kB",e.fillStyle="black",e.fillText(n,f,t+12),f+=e.measureText(n).width+5),l.bw&&(n=l.bw>1e3?(l.bw/1e3).toFixed(1)+"Mbps":l.bw+" kbps",e.fillStyle="black",e.fillText(n,f,t+12),f+=e.measureText(n).width+5),e.fillStyle="black",e.font="15px Arial",n=l.type,void 0!==l.id2&&(n+=" "+l.id2),void 0!==l.id3&&(n+="/"+l.id3),void 0!==l.id&&(-1!==l.type.indexOf("fragment")&&(n+=" @"),n+=" "+l.id),void 0!==l.start&&(n+=" ["+l.start+","+l.end+"]"),e.fillText(n,5,t+15)}function canvasDrawVideoEvent(e,t,l,i,a){var n,f,r,h=eventLeftMargin,g=e.canvas.width-eventLeftMargin-eventRightMargin;e.fillStyle="black",e.font="15px Arial",n=l.type,void 0!==l.name&&(n+=":"+l.name),e.fillText(n,5,t+15),e.fillStyle="black",e.font="12px Arial",n=Math.round(l.time),f=h-(e.measureText(n).width+5)+g*(l.time-i)/(a-i),e.fillText(n,f,t+12),f=h+g*(l.time-i)/(a-i),r=l.duration?g*l.duration/(a-i):1,e.fillRect(f,t,r,15),l.duration&&(e.fillStyle="black",e.font="12px Arial",n=Math.round(l.time+l.duration),f+=r+5,e.fillText(n,f,t+12),f+=e.measureText(n).width+5,n="["+Math.round(l.duration)+"]",e.fillStyle="blue",e.fillText(n,f,t+12))}
//# sourceMappingURL=index.83ba568f.js.map
